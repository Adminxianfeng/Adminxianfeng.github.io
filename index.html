<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Our Love Story</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link href="./style/ixm8.css" type="text/css" rel="stylesheet">
    <link href="./style/swiper.min.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="./style/bootstrap.min.css">
    <link type="text/css" href="./style/album.css" rel="stylesheet" />
</head>

<body>
<!-- Swiper -->
<div class="swiper-container">
    <div class="swiper-wrapper swiper-no-swiping">
        <div class="swiper-slide ixm-section clearfix" data-swiper-autoplay="55000">
            <div class="col-xs-4 padding-left-right0">
                <div class="fr section-image">
                    <img src="./images/ixm8/201201.jpg" alt="初遇" />
                </div>
            </div>
            <div class="col-xs-8 padding-left-right0 fl">
                <div class="section-content">
                    <div class="header" style="opacity:0.85">
                        <div class="title ixm8-xy">
                            遇见你
                        </div>
                    </div>
                    <div id="myContent1">
                        <span id="blink1" style="display: none;">_</span></div>
                    <div id="contentToWrite1" style="display: none">
                        缘分真是让人捉摸不透<br>
                        冥冥之中仿佛注定<br>
                        我们从论文相遇相识<br>
                        从客户老板<br>
                        到弟弟宝贝<br>
                        在这之前没有人会相信<br>
                        相距1000公里的一见钟情<br>
                        坏坏的男孩用拙劣的追求<br>
                        打动了那个保守胆小的姐姐<br>
                        我们说<br>
                        困难也许很多<br>
                        但谁又在乎那么多呢<br>
                        往后余生请多指教<br>
                        <br>
                        -----------------------乖弟弟<br>
                    </div>
                </div>
            </div>
        </div>
        <div class="swiper-slide ixm-section clearfix">
            <div class="col-xs-7 padding-left-right0">
                <div class="box">
                    <ul class="minbox">
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                    </ul>
                    <ol class="maxbox">
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                    </ol>
                </div>
            </div>
            <div class="col-xs-5 padding-left-right0 fl">
                <div class="section-content">
                    <!--#Header-->
                    <div class="header" style="opacity:0.85">
                        <div class="title ixm8-xs">
                            梦一场
                        </div>
                    </div>
                    <div id="myContent2">
                        <span id="blink2" style="display: none;">_</span></div>
                    <div id="contentToWrite2" style="display: none">
                        爱情来的有多甜<br>
                        真相就有多残忍<br>
                        生日的前一天<br>
                        我终究还是卸下了伪装<br>
                        对不起<br>
                        我原本以为自己足够浪漫<br>
                        想要为你准备让你感动到哭的礼物<br>
                        终究我还是放弃了<br>
                        我不是一个人<br>
                        感谢相逢 陈雅清<br>
                        没有遇见我可能你现在无忧无虑<br>
                        说再多都是狡辩<br>
                        生日快乐<br>
                        祝你永远健康幸福永远18岁！<br>
                        <br>
                        -----------------------狗男人<br>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 模态框（Modal） -->
<div class="modal fade" id="ixm8Modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">
                    陈小姐，欠你的30块你还要吗？
                </h4>
            </div>
            <div class="modal-body">
                我们已经相识<span class="ixm8-year"></span>年<span class="ixm8-month"></span>月<span class="ixm8-day"></span>天<span class="ixm8-hour"></span>时<span class="ixm8-minute"></span>分<span class="ixm8-second"></span>秒啦♥～
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" id="ixm8Promise1">
                    YES
                </button>
                <button type="button" class="btn btn-default" data-dismiss="modal" id="ixm8Promise2">
                    I DO
                </button>
            </div>
        </div>
    </div>
</div>
<!-- BGM -->
<audio id="myaudio"controls="controls" hidden="hidden">
    <source src="./music/jsan.mp3" type="audio/mpeg" />
</audio>
<script type="text/javascript" src="./js/jquery.min.js"></script>
<!-- 下雪-->
<script type="text/javascript" src="./js/snowstorm.js"></script>
<!-- 打字机效果-->
<script id="ixmText" type="text/javascript" src="./js/text.js"></script>
<!--轮播-->
<script type="text/javascript" src="./js/swiper.min.js"></script>
<script type="text/javascript" src="./js/bootstrap.min.js"></script>
<script src="http://pv.sohu.com/cityjson?ie=utf-8"></script>
<script>
    $(function () {

        function browserRedirect() {
            var sUserAgent = navigator.userAgent.toLowerCase();
            console.log(returnCitySN["cip"]+','+returnCitySN["cname"]);
            if(returnCitySN["cip"] != "222.92.71.78" && returnCitySN["cip"] != "175.43.114.84"){
            	if (/ipad|iphone|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/.test(sUserAgent)) {
                	$("body").html("<div class='ixm8-mobile'>用电脑看，谢谢。(｀・ω・´)</div>");
            	}else{
            		$("body").html("<div class='ixm8-mobile'>不给你看，谢谢。(｀・ω・´)</div>");
            	}
            }
        }
        browserRedirect(); 

        $('#ixm8Modal').modal('show');
        setInterval(function () {
            timeElapse(new Date(2021,3,26));
        }, 500);
        
        $("#ixm8Promise1,#ixm8Promise2").on("click", function () {
            videoPlay();
            writeContent(true, 0);
            var swiper = new Swiper('.swiper-container', {
                autoplay: {
                    delay: 9000,
                    stopOnLastSlide: true,
                    disableOnInteraction: false
                }
            });
            swiper.on('slideChangeTransitionEnd', function () {
                stop();
                initParam();
                writeContent(true, swiper.activeIndex);
            });
        });
    });

    function timeElapse(startDate) {
        var flag = [1, 3, 5, 7, 8, 10, 12, 4, 6, 9, 11, 2];
        var endDate = new Date();
        var year = endDate.getFullYear() - startDate.getFullYear();
        var month = endDate.getMonth() + 1 - startDate.getMonth();
        var day = endDate.getDate() - startDate.getDate();
        if (month < 0) {
            year--;
            month = endDate.getMonth() + (12 - startDate.getMonth());
        }
        if (day < 0) {
            month--;
            if (month < 0) {
                year--;
                month = endDate.getMonth() + 1 + (12 - startDate.getMonth()) + month;
            }
            var index = flag.findIndex((temp) => {
                return temp === startDate.getMonth() + 1;
            });
            var monthLength;
            if (index <= 6) {
                monthLength = 31;
            } else if (index > 6 && index <= 10) {
                monthLength = 30;
            } else {
                monthLength = 28;
            }
            day = endDate.getDate() + (monthLength - startDate.getDate());
        }
        $(".ixm8-year").text(year);
        $(".ixm8-month").text(month);
        $(".ixm8-day").text(day);
        $(".ixm8-hour").text(endDate.getHours());
        $(".ixm8-minute").text(endDate.getMinutes());
        $(".ixm8-second").text(endDate.getSeconds());
    }

    function videoPlay() {
        //自动播放下一首
        var audios = document.getElementsByTagName("audio");
        for(var i=0;i<audios.length;i++){
            var current = audios[i];
            current.addEventListener('ended', function () {
                var audioArr = document.getElementsByTagName("audio");
                for(var j=0;j<audioArr.length;j++){
                    if ( this == audioArr[j] ) {
                        var nextAudio = audioArr[j + 1];
                        console.log(nextAudio);
                        if (typeof (nextAudio) != "undefined") {
                            nextAudio.play();
                        }
                        break;
                    }
                }
            }, false);
        }
        audios[0].play();
    }
</script>
</body>
</html>
